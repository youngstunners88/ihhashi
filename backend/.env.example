# ============================================================
# iHhashi Backend Environment Configuration
# ============================================================
# Copy this file to .env and fill in your values
# Generate secrets with: python -c "import secrets; print(secrets.token_urlsafe(32))"

# === APPLICATION ===
ENVIRONMENT=development
DEBUG=true
APP_NAME=iHhashi
APP_VERSION=0.3.0

# === SECURITY ===
# REQUIRED: Generate a secure secret key for JWT signing
SECRET_KEY=your-secret-key-change-in-production

# JWT Configuration
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# === DATABASE - MONGODB ===
# REQUIRED: MongoDB connection string
# Format: mongodb://[username:password@]host[:port][/[database][?options]]
# For MongoDB Atlas: mongodb+srv://<user>:<password>@cluster.mongodb.net/<database>
MONGODB_URL=mongodb://localhost:27017
DB_NAME=ihhashi

# MongoDB credentials (for Docker Compose)
MONGO_USERNAME=ihhashi
MONGO_PASSWORD=your-mongo-password

# === REDIS ===
# REQUIRED: Redis connection for caching and rate limiting
REDIS_URL=redis://localhost:6379

# === CORS ===
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:8080

# === MONITORING - GLITCHTIP ===
# GlitchTip DSN (Sentry-compatible error tracking)
GLITCHTIP_DSN=https://25a5585d096a411495f93126742fbf73@app.glitchtip.com/20760
GLITCHTIP_SECURITY_ENDPOINT=https://app.glitchtip.com/api/20760/security/?glitchtip_key=25a5585d096a411495f93126742fbf73

# === ANALYTICS - POSTHOG ===
POSTHOG_API_KEY=your-posthog-api-key
POSTHOG_HOST=https://app.posthog.com

# === AUTHENTICATION - SUPABASE ===
# REQUIRED: Supabase configuration for phone OTP auth
SUPABASE_URL=https://tehxyuhsyqzroklplvcf.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# === PAYMENTS - PAYSTACK (South Africa) ===
# REQUIRED: Paystack for payment processing
# Test keys start with sk_test_ and pk_test_
# Live keys start with sk_live_ and pk_live_
PAYSTACK_SECRET_KEY=sk_test_your-paystack-secret-key
PAYSTACK_PUBLIC_KEY=pk_test_your-paystack-public-key
PAYSTACK_WEBHOOK_SECRET=whsec_your-webhook-secret

# === PAYMENTS - YOCO (South Africa Alternative) ===
YOCO_SECRET_KEY=sk_test_your-yoco-secret-key

# === MAPS - GOOGLE MAPS ===
# REQUIRED: For delivery address autocomplete and navigation
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# === PUSH NOTIFICATIONS - FIREBASE ===
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_PRIVATE_KEY_ID=your-private-key-id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nyour-private-key\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@your-project.iam.gserviceaccount.com
FIREBASE_STORAGE_BUCKET=your-project.appspot.com

# === SMS - TWILIO ===
# For order notifications and OTP fallback
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+27xxxxxxxxx

# === TELEGRAM BOT ===
# For driver/customer notifications
TELEGRAM_BOT_TOKEN=your-telegram-bot-token

# === RATE LIMITING ===
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60
AUTH_RATE_LIMIT=5/minute

# === SOUTH AFRICA SPECIFIC ===
# Supported languages (ISO 639-1 codes)
SUPPORTED_LANGUAGES=["en","zu","st","af","tn","xh","so"]

# Free trial configuration
FREE_TRIAL_DAYS=45
FREE_TRIAL_PLATFORM_FEE_PERCENT=0.0
STANDARD_PLATFORM_FEE_PERCENT=15.0

# South African tax
VAT_RATE=0.15
DEFAULT_CURRENCY=ZAR

# Tipping - 0% platform fee on tips
TIP_PLATFORM_FEE_PERCENT=0.0

# === PAYOUT CONFIGURATION ===
# Payout day: Sunday at 11:11 AM SAST
PAYOUT_DAY_OF_WEEK=6  # Sunday (0=Monday)
PAYOUT_HOUR=11
PAYOUT_MINUTE=11
MINIMUM_PAYOUT_AMOUNT=100  # R100 minimum

# === FILE UPLOAD ===
MAX_FILE_SIZE_MB=5
ALLOWED_IMAGE_TYPES=["image/jpeg","image/png","image/webp"]

# === DELIVERY CONFIGURATION ===
MAX_DELIVERY_RADIUS_KM=15
ESTIMATED_DELIVERY_TIME_MINUTES=45
